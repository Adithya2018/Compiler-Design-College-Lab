(window.webpackJsonp_1e2cdec9_1360_4295_b73c_98d6f51866d5_0_1_0=window.webpackJsonp_1e2cdec9_1360_4295_b73c_98d6f51866d5_0_1_0||[]).push([[14],{Ro1z:function(e,t,i){"use strict";i.r(t),i.d(t,"SiteScriptProgressIndicator",function(){return d});var r=i("17wl"),n=i("cDcd"),s=i("Twfj"),a=i("BRII"),o=i("mVz8"),p=i("Kpnc"),c=i("xRpW"),l=i.n(c),g=i("E5gq"),_=i("PSoJ"),S=i("tj2R"),P=Object(g.a)(function(){return Object(r.__awaiter)(void 0,void 0,void 0,function(){return Object(r.__generator)(this,function(e){switch(e.label){case 0:return[4,Promise.all([i.e(0),i.e(3),i.e(8),i.e(37)]).then(i.bind(null,"oGYV"))];case 1:return[2,e.sent().SiteScriptProgressPanel]}})})}),d=function(e){function t(t){var i=e.call(this,t)||this;return i._onNewDataReceived=function(e){e.isSiteDesignPending&&(i._firstRunPanelExperience||(o.Engagement.logData({name:"SiteScripts.BarAppeared"}),i._firstRunPanelExperience=!0));var t=!1;e.canRenderWebTemplatesGalleryFirstRun&&Object(_.a)(i.props.pageContext)&&(t=!0),i.setState({isComplete:i._siteScriptProgressStateManager.isRunComplete(e.displayedRunKey),isVisible:e.isSiteDesignPending,renderWebTemplatesGalleryFirstRun:t})},i._onOpenPanelAction=function(e){o.Engagement.logData({name:"SiteScripts.OpenPanelFromGear.Click"}),i.state.isPanelOpen||i.setState({isPanelOpen:!0})},i._onClickOpenPanel=function(e){o.Engagement.logData({name:"SiteScripts.OpenPanelFromBar.Click"}),i.setState({isPanelOpen:!0}),e.stopPropagation(),e.preventDefault()},i._onClickRefreshPage=function(e){o.Engagement.logData({name:"SiteScripts.RefreshFromBar.Click"}),window.location.href=i.props.pageContext?i.props.pageContext.webServerRelativeUrl:window.location.href},i._onPanelDismissed=function(){i.setState({isPanelOpen:!1})},i.state={isPanelOpen:!1,isComplete:!1,isVisible:!1,renderWebTemplatesGalleryFirstRun:!1},i._siteScriptProgressStateManager=p.SiteScriptProgressStateManager.getInstance({pageContext:t.pageContext}),i._panelWasEverOpen=!1,i._firstRunPanelExperience=!1,i}return Object(r.__extends)(t,e),t.prototype.componentDidMount=function(){this._siteScriptProgressManagerKey="SiteScriptProgressIndicator"+Math.random().toString(),this._siteScriptProgressStateManager.registerCallback(this._siteScriptProgressManagerKey,p.SiteScriptProgressCallbackType.newProgressData,this._onNewDataReceived),this._siteScriptProgressStateManager.registerCallback(this._siteScriptProgressManagerKey,p.SiteScriptProgressCallbackType.openPanelAction,this._onOpenPanelAction)},t.prototype.componentWillUnmount=function(){this._siteScriptProgressStateManager.unregisterCallback(this._siteScriptProgressManagerKey,p.SiteScriptProgressCallbackType.newProgressData),this._siteScriptProgressStateManager.unregisterCallback(this._siteScriptProgressManagerKey,p.SiteScriptProgressCallbackType.openPanelAction)},t.prototype.render=function(){var e,t;if(this._panelWasEverOpen=this._panelWasEverOpen||this.state.isPanelOpen,this.state.isVisible||this._siteScriptProgressStateManager.getState().isSiteDesignPending)if(this.state.isComplete){3!==(c=l.a.SiteScriptProgressIndicatorCompleteText.split(/{[01]}/)).length&&(c=[l.a.SiteScriptProgressIndicatorCompleteText,"",""]);var i,o=n.createElement(a.Link,{onClick:this._onClickOpenPanel,"data-automationid":"SiteScriptProgressOpenPanelLink"},l.a.SiteScriptProgressIndicatorViewLink),p=n.createElement(a.Link,{onClick:this._onClickRefreshPage},l.a.SiteScriptProgressIndicatorCompleteLink);i=l.a.SiteScriptProgressIndicatorCompleteText.indexOf("{0}")<=l.a.SiteScriptProgressIndicatorCompleteText.indexOf("{1}")?[o,p]:[p,o],t=n.createElement(s.MessageBar,{messageBarType:s.MessageBarType.warning},c[0],i[0],c[1],i[1],c[2])}else{var c;2!==(c=l.a.SiteScriptProgressIndicatorIncompleteText5.split("{0}")).length&&(c=[l.a.SiteScriptProgressIndicatorIncompleteText5,""]),t=n.createElement(s.MessageBar,{messageBarType:s.MessageBarType.warning},c[0],n.createElement(a.Link,{onClick:this._onClickOpenPanel,"data-automationid":"SiteScriptProgressOpenPanelLink"},l.a.SiteScriptProgressIndicatorViewProgressLink5),c[1])}else{if(this.state.renderWebTemplatesGalleryFirstRun)return n.createElement(S.a,Object(r.__assign)({},{pageContext:this.props.pageContext,imageUrls:{webTemplatesFirstRunIllustration:null===(e=this.props.imageUrls)||void 0===e?void 0:e.webTemplatesFirstRunIllustration}}));if(!this._panelWasEverOpen)return null;t=void 0}return n.createElement("div",null,t,n.createElement(P,{onDismissed:this._onPanelDismissed,siteScriptProgressStateManager:this._siteScriptProgressStateManager,isOpen:this.state.isPanelOpen,firstRunPanelExperience:this._firstRunPanelExperience,responsiveMode:this.props.responsiveMode,imageUrls:this.props.imageUrls,pageContext:this.props.pageContext}))},t}(n.Component)},xRpW:function(e,t){var i={SiteScriptProgressIndicatorIncompleteText5:"Applying site design. We\u0027re updating your site based on the design you chose. {0}",SiteScriptProgressIndicatorViewProgressLink5:"View progress",SiteScriptProgressIndicatorCompleteText:"{0} applied. {1}.",SiteScriptProgressIndicatorViewLink:"Site design",SiteScriptProgressIndicatorCompleteLink:"Refresh this site to see the changes"};i.default=i,e.exports=i}}]);